function AddCoreToPriorities()
	Log("AddCore start")
	for index, Priority in pairs(priorities) do
		Log("Filling Priority "..index.." with Core")
		PossibleMissingDevice = "reactor"
		itemFound = false
		for key, savename in pairs(Priority) do
			if PossibleMissingDevice == savename[1] then itemFound = true break end
		end
		if not itemFound then table.insert(Priority,1,{PossibleMissingDevice,101,100}) Log("item: "..PossibleMissingDevice.." added") else Log("item: "..PossibleMissingDevice.." was already in the list")end
	end
end

function FillPriorities() -- This is to allow modded weapons to be easily added to targeting without requiring the modder to add custom priorities to all of them
	Log("FillPri start")	--TODO: Add a check so any early check that might contain -1 don't stop the execution, order the list.
	for index, Priority in pairs(priorities) do
		Log("Filling Priority "..index.." with empties")
		for key, PossibleMissingDevice in pairs(AllTypesOfDevicesAndWeapons) do
			itemFound = false
			for key, savename in pairs(Priority) do
				if PossibleMissingDevice == savename[1] then itemFound = true break end
			end 
			if not itemFound then table.insert(Priority,{PossibleMissingDevice,0,0}) Log("item: "..PossibleMissingDevice.." added") else Log("item: "..PossibleMissingDevice.." was already in the list")end
		end
	end
end
--table.sort(priorities[i], function(a,b) return tonumber(a) < tonumber(b) end)
function FillPriorityEmpty(Priority)
	Log("Filling "..Priority)
	for key, PossibleMissingDevice in pairs(AllTypesOfDevicesAndWeapons) do
		itemFound = false
		for key, savename in pairs(priorities[Priority]) do
			if PossibleMissingDevice == savename[1] then itemFound = true break end
		end
		if not itemFound then table.insert(priorities[Priority],{PossibleMissingDevice,-1,-1}) Log("item: "..PossibleMissingDevice.." added") else Log("item: "..PossibleMissingDevice.." was already in the list")end
	end
end
--table.insert(priorities,1,{"reactor",101,100})
AllTypesOfDevicesAndWeapons = {
"machinegun",
"minigun",
"sniper",
"sniper2",
"mortar",
"mortar2",
"missile",
"missile2",
"missileinv",
"missile2inv",
"cannon",
"laser",
"flak",
"shotgun",
"rocketemp",
"rocket",
"firebeam",
"cannon20mm",
"buzzsaw",
"howitzer",
"magnabeam",
"smokebomb",
"munitions",	
"factory",
"upgrade",
"workshop",
"armoury", 
"barrel",
"battery", 
"mine2",
"mine",
"turbine2",
"turbine",

"store",
"repairstation",
}
Log("priorities are being defined.")
priorities = {
-- uww ze coure is waweaws tawrgetted furst
-- must be ordered by priority (max(direct, splash)), descending
-- {"reactor", 101, 100} is implicitly given in every table unless specified otherwise
-- {"savename", 0.1, 0} for every savename in AllTypesOfDevicesAndWeapons, is implicitly given in every table unless specified otherwise
-- (-1,_) counts as disabled, (0,-1) will automaticly remove splash calculation from the weapon (if its 0 it will still count as valid, but have 0 priority.)
["machinegun"] = {
	{"machinegun", 100},
},

["minigun"] = {
	{"machinegun", 100},
	{"turbine2", 99},
	{"mine2", 99},
	{"turbine", 98},
	{"mine", 98},
	{"barrel", 95},
	{"munitions", 92},
	{"factory", 92},
	{"upgrade", 92},
	{"workshop", 91},
	{"armoury", 91},
	{"shotgun", 90},
	{"mortar2", 85},
	{"mortar", 84},
	{"battery", 81},
	{"store", 81},
	{"rocketemp", 80},
	{"rocket", 80},
	{"smokebomb", 80},
	{"missile2", 75},
	{"missile2inv", 75},
	{"missile", 70},
	{"missileinv", 70},
	{"howitzer", 65},
	{"cannon", 65},
	{"laser", 65},
	{"cannon20mm", 60},
	{"firebeam", 60},
	{"magnabeam", 60},
	{"buzzsaw", 55},
	{"minigun", 55},
	{"flak", 50},
	{"sniper2", 40},
	{"sniper", 20},
	{"repairstation", 5},
},

["sniper"] = {
	{"barrel", 100},
	{"buzzsaw", 100},
	{"cannon20mm", 100},
	{"firebeam", 100},
	{"rocketemp", 95},
	{"flak", 94},
	{"laser", 90},
	{"sniper2", 85},
	{"sniper", 84},
	{"minigun", 80},
	{"rocket", 75},
	{"smokebomb", 75},
	{"shotgun", 75},
	{"missile2", 75},
	{"missile2inv", 75},
	{"missile", 70},
	{"missileinv", 70},
	{"mortar2", 65},
	{"mortar", 64},
	{"machinegun", 60},
	{"magnabeam", 60},
	{"cannon", 55},
	{"howitzer", 54},
	{"munitions", 51},
	{"factory", 51},
	{"upgrade", 51},
	{"workshop", 50},
	{"armoury", 50},
	{"battery", 50},
	{"mine2", 10},
	{"mine", 9},
	{"turbine2", 5},
	{"turbine", 4},
	{"store", 4},
	{"repairstation", 4},
},

["sniper2"] = {
	{"barrel", 100},
	{"buzzsaw", 100},
	{"cannon20mm", 100},
	{"firebeam", 100},
	{"shotgun", 95},
	{"rocketemp", 95},
	{"flak", 94},
	{"laser", 90},
	{"sniper2", 85},
	{"sniper", 84},
	{"minigun", 80},
	{"rocket", 75},
	{"smokebomb", 75},
	{"missile2", 75},
	{"missile2inv", 75},
	{"missile", 70},
	{"missileinv", 70},
	{"mortar2", 65},
	{"mortar", 64},
	{"machinegun", 60},
	{"magnabeam", 60},
	{"howitzer", 55},
	{"cannon", 55},
	{"munitions", 51},
	{"factory", 51},
	{"upgrade", 51},
	{"workshop", 50},
	{"armoury", 50},
	{"battery", 30},
	{"mine2", 20},
	{"store", 5},
},

["mortar"] = {
	{"machinegun", 100, 50},
	{"flak", 100, -1},
	{"barrel", 100, 70},
	{"munitions", 95, -1},
	{"factory", 95, -1},
	{"upgrade", 95, -1},
	{"workshop", 94, -1},
	{"armoury", 94, -1},
	{"mine2", 90, -1},
	{"turbine2", 85, -1},
	{"mine", 85, -1},
	{"turbine", 80, -1},
	{"missile2", 80, -1},
	{"missile2inv", 80, -1},
	{"missile", 75, -1},
	{"missileinv", 75, -1},
	{"howitzer", 70, -1},
	{"cannon", 65, -1},
	{"laser", 65, -1},
	{"cannon20mm", 60, -1},
	{"firebeam", 60, -1},
	{"magnabeam", 60, -1},
	{"buzzsaw", 50, -1},
	{"rocketemp", 50, -1},
	{"sniper2", 50, -1},
	{"sniper", 50, 40},
	{"minigun", 50, -1},
	{"rocket", 50, -1},
	{"smokebomb", 50, -1},
	{"shotgun", 50, -1},
	{"mortar2", 50, -1},
	{"mortar", 50, -1},
	{"battery", 30, 30},
	{"store", 29, -1},
	{"repairstation", 5, -1},
},

["mortar2"] = {
	{"machinegun", 100, 60},
	{"flak", 100, 40},
	{"barrel", 100, 70},
	{"munitions", 95, -1},
	{"factory", 95, -1},
	{"upgrade", 95, -1},
	{"workshop", 94, -1},
	{"armoury", 94, -1},
	{"mine2", 90, -1},
	{"turbine2", 85, -1},
	{"mine", 85, -1},
	{"turbine", 80, -1},
	{"missile2", 80, -1},
	{"missile2inv", 80, -1},
	{"missile", 75, -1},
	{"missileinv", 75, -1},
	{"howitzer", 70, -1},
	{"cannon", 65, -1},
	{"laser", 65, -1},
	{"cannon20mm", 60, -1},
	{"firebeam", 60, 50},
	{"battery", 30, 60},
	{"buzzsaw", 50, -1},
	{"rocketemp", 50, -1},
	{"sniper2", 50, -1},
	{"sniper", 50, -1},
	{"minigun", 50, -1},
	{"rocket", 50, -1},
	{"smokebomb", 50, -1},
	{"shotgun", 50, -1},
	{"mortar2", 50, -1},
	{"mortar", 50, -1},
	{"magnabeam", 29, -1},
	{"store", 29, -1},
	{"repairstation", 5, -1},
},

["missile"] = {
	{"turbine2", 100},
	{"turbine", 100},
	{"machinegun", 100},
	{"flak", 100},
	{"barrel", 100},
	{"shotgun", 100},
	{"munitions", 95},
	{"factory", 95},
	{"upgrade", 95},
	{"workshop", 94},
	{"armoury", 94},
	{"missile2", 90},
	{"missile2inv", 90},
	{"mine2", 90},
	{"mine", 85},
	{"missile", 75},
	{"missileinv", 75},
	{"howitzer", 70},
	{"cannon", 65},
	{"laser", 65},
	{"battery", 61},
	{"cannon20mm", 60},
	{"firebeam", 60},
	{"magnabeam", 60},
	{"buzzsaw", 50},
	{"rocketemp", 50},
	{"sniper2", 50},
	{"sniper", 50},
	{"minigun", 50},
	{"rocket", 50},
	{"smokebomb", 50},
	{"mortar2", 50},
	{"mortar", 50},
	{"store", 29},
	{"repairstation", 5},
},

["missileinv"] = {
	{"turbine2", 100},
	{"turbine", 100},
	{"machinegun", 100},
	{"flak", 100},
	{"barrel", 100},
	{"shotgun", 100},
	{"munitions", 95},
	{"factory", 95},
	{"upgrade", 95},
	{"workshop", 94},
	{"armoury", 94},
	{"missile2", 90},
	{"missile2inv", 90},
	{"mine2", 90},
	{"mine", 85},
	{"missile", 75},
	{"missileinv", 75},
	{"howitzer", 70},
	{"cannon", 65},
	{"laser", 65},
	{"battery", 61},
	{"cannon20mm", 60},
	{"firebeam", 60},
	{"magnabeam", 60},
	{"buzzsaw", 50},
	{"rocketemp", 50},
	{"sniper2", 50},
	{"sniper", 50},
	{"minigun", 50},
	{"rocket", 50},
	{"smokebomb", 50},
	{"mortar2", 50},
	{"mortar", 50},
	{"store", 29},
	{"repairstation", 5},
},

["missile2"] = {
	{"barrel", 0, 100}, -- will most definitely be sniped
	{"howitzer", 100, 96},
	{"cannon", 95, 95},
	{"laser", 15, 95}, -- will be taken out by snipers etc. before nuke arrives, thus low direct fire prob
	{"cannon20mm", 15, 90},
	{"firebeam", 15, 90},
	{"rocket", 0, 60},
	{"smokebomb", 0, 60},
	{"buzzsaw", 0, 50},
	{"rocketemp", 0, 50},
	{"magnabeam", 10, 50},
	{"sniper2", 0, 50},
	{"sniper", 0, 50},
	{"minigun", 0, 50},
	{"mortar2", 0, 50},
	{"mortar", 0, 50},
	{"shotgun", 0, 50},
	{"machinegun", 0, 40},
	{"flak", 0, 40},
	{"turbine2", 5, 20},
},

["missile2inv"] = {
	{"barrel", 0, 100}, -- will most definitely be sniped
	{"howitzer", 100, 96},
	{"cannon", 95, 95},
	{"laser", 15, 95}, -- will be taken out by snipers etc. before nuke arrives, thus low direct fire prob
	{"cannon20mm", 15, 90},
	{"firebeam", 15, 90},
	{"rocket", 0, 60},
	{"smokebomb", 0, 60},
	{"buzzsaw", 0, 50},
	{"rocketemp", 0, 50},
	{"magnabeam", 10, 50},
	{"sniper2", 0, 50},
	{"sniper", 0, 50},
	{"minigun", 0, 50},
	{"mortar2", 0, 50},
	{"mortar", 0, 50},
	{"shotgun", 0, 50},
	{"machinegun", 0, 40},
	{"flak", 0, 40},
	{"turbine2", 5, 20},
},

["cannon"] = {
	{"howitzer", 100, 60},
	{"cannon", 100, 50},
	{"laser", 100, 50},
	{"missile2", 95, -1},
	{"missile2inv", 95, -1},
	{"missile", 93, -1},
	{"missileinv", 93, -1},
	{"munitions", 92, 15},
	{"factory", 92, 15},
	{"upgrade", 92, -1},
	{"workshop", 91, -1},
	{"armoury", 91, -1},
	{"cannon20mm", 90, 30},
	{"firebeam", 80, 10},
	{"magnabeam", 80, 10},
	{"barrel", 30, 80,},
	{"battery", 75, 50},
	{"mine2", 71, -1},
	{"mortar2", 71, 50},
	{"mortar", 70, 50},
	{"mine", 70, -1},
	{"turbine2", 69, 20},
	{"turbine", 68, -1},
	{"rocketemp", 65, 50},
	{"store", 65, -1},
	{"rocket", 60, 25},
	{"smokebomb", 60, -1},
	{"buzzsaw", 60, -1},
	{"minigun", 50, 20,},
	{"sniper2", 50, 15},
	{"shotgun", 40, 15},
	{"flak", 35, 15},
	{"sniper", 20, 10},
	{"repairstation", 5, -1},
	{"machinegun", -1, -1}, -- never fire cannon at machine gun
},

["laser"] = {
	{"howitzer", 100},
	{"cannon", 100},
	{"laser", 100},
	{"missile2", 95},
	{"missile2inv", 95},
	{"missile", 93},
	{"missileinv", 93},
	{"munitions", 92},
	{"factory", 92},
	{"upgrade", 92},
	{"workshop", 91},
	{"armoury", 91},
	{"cannon20mm", 90},
	{"firebeam", 80},
	{"magnabeam", 80},
	{"battery", 75},
	{"mine2", 71},
	{"mortar2", 71},
	{"mortar", 70},
	{"mine", 70},
	{"turbine2", 69},
	{"turbine", 68},
	{"rocketemp", 65},
	{"store", 65},
	{"rocket", 60},
	{"buzzsaw", 60},
	{"sniper2", 55},
	{"minigun", 50},
	{"smokebomb", 50},
	{"shotgun", 50},
	{"barrel", 40},
	{"flak", 30},
	{"sniper", 20},
	{"repairstation", 20},
	{"machinegun", -1}, -- never fire a laser at a machine gun
},

["flak"] = {
	{"mortar2", 3},
	{"mortar", 2},
	{"machinegun", 1},
},

["shotgun"] = {
	{"machinegun", 70},
	{"rocketemp", 70},
	{"rocket", 70},
	{"firebeam", 70},
	{"battery", 65},
	{"barrel", 65},
	{"munitions", 64},
	{"factory", 64},
	{"upgrade", 64},
	{"workshop", 63},
	{"armoury", 63},
	{"turbine2", 63},
	{"mortar2", 63},
	{"minigun", 62},
	{"mortar", 60},
	{"turbine", 60},
	{"howitzer", 60},
	{"cannon20mm", 55},
	{"missile2", 55},
	{"missile2inv", 55},
	{"missile", 50},
	{"missileinv", 50},
},

["rocketemp"] = {
	{"reactor",101,80},
	{"missile2", 60,100},
	{"missile2inv", 60,100},
	{"howitzer", 35, 100},
	{"cannon", 35, 100},
	{"laser", 40, 100},
	{"missile", 50,80},
	{"missileinv", 50,80},
	{"firebeam", 40,70},
	{"cannon20mm", 40,70},
	{"turbine2", 70,60},
	{"turbine", 70,60},
	{"munitions", 64,70},
	{"factory", 64,70},
	{"battery", 65,60},
	{"barrel", 65,30},
	{"upgrade", 64,65},
	{"workshop", 63,60},
	{"armoury", 63,60},
	{"rocketemp", 40,60},
	{"rocket", 40,60},
	{"mine", 30,50},
	{"mine2", 30,50},
	{"machinegun", 30,5},
	{"magnabeam", 10, 5},
},

["rocket"] = {
	{"howitzer", 45, 100},
	{"cannon", 50, 100},
	{"laser", 55, 100},
	{"firebeam", 50,75},
	{"cannon20mm", 50,75},
	{"turbine2", 75,50},
	{"turbine", 70,50},
	{"battery", 65,50},
	{"barrel", 65,60},
	{"rocketemp", 60,60},
	{"rocket", 60,60},
	{"buzzsaw",60,50},
	{"minigun",60,50},
	{"munitions", 60,40},
	{"factory", 60,40},
	{"upgrade", 21,20},
	{"workshop", 21,20},
	{"armoury", 21,20},
	{"flak",21,60},
	{"shotgun",21,55}, 
	{"smokebomb",21,30},
	{"machinegun", 0,20},
	{"missile2", 15,0},
	{"missile2inv", 15,0},
	{"missile", 15,0},
	{"missileinv", 15,0},
	{"mine", 10,15},
	{"mine2", 10,15},
	{"magnabeam", 2, 10},
},

["firebeam"] = {
	{"laser", 100, 80},
	{"firebeam", 100, 80},
	{"cannon20mm", 95, 80},
	{"cannon", 90, 50},
	{"barrel", 90, 80,},
	{"battery", 75, 60},
	{"mortar2", 71, 60},
	{"mortar", 70, 50},
	{"turbine2", 69, 60},
	{"turbine", 68, -1},
	{"rocketemp", 65, 70},
	{"rocket", 60, 70},
	{"smokebomb", 60, -1},
	{"buzzsaw", 60, -1},
	{"minigun", 50, 20,},
	{"sniper2", 50, 15},
	{"shotgun", 40, 15},
	{"flak", 35, 15},
	{"howitzer", 35, 35},
	{"sniper", 25, 30},
	{"mine2", 23, -1},
	{"munitions", 22, 15},
	{"factory", 22, 15},
	{"upgrade", 21, -1},
	{"workshop", 20, -1},
	{"armoury", 20, -1},
	{"mine", 20, -1},
	{"store", 11, -1},
	{"repairstation", 10, 0},
	{"machinegun", 10, 10},
	{"missile2", 1, -1},
	{"missile2inv", 1, -1},
	{"missile", 1, -1},
	{"missileinv", 1, -1},
},

["cannon20mm"] = {
	{"battery", 65,25},
	{"barrel", 65,60},
	{"machinegun", 60,10},
	{"laser", 55, 70},
	{"cannon20mm", 55,20},
	{"rocketemp", 55,10},
	{"rocket", 55,10},
	{"cannon", 55,10},
	{"missile2", 55,5},
	{"missile2inv", 55,5},
	{"missile", 50,5},
	{"missileinv", 50,5},
	{"turbine2", 50,20},
	{"turbine", 45,-1},
	{"munitions", 45,-1},
	{"factory", 45,-1},
	{"upgrade", 45,-1},
	{"workshop", 45,-1},
	{"armoury", 45,-1},
	{"firebeam", 30,10},
	{"store", 5, -1},
},

["buzzsaw"] = {
	{"reactor", 140,200},
	{"barrel", 80, 195},
	{"battery", 75, 195},
	{"munitions", 30, 170},
	{"factory", 30, 170},
	{"upgrade", 20, 150},
	{"workshop", 20, 150},
	{"armoury", 20, 150},
	{"howitzer", 70, 100},
	{"cannon", 60, 100},
	{"laser", 70, 100},
	{"store", 50, 90},
	{"rocket", 45, 90},
	{"rocketemp", 65, 90},
	{"cannon20mm", 90, 30},
	{"mortar2", 60, 90},
	{"missile2", 50, 85},
	{"missile2inv", 50, 85},
	{"firebeam", 80, 85},
	{"shotgun", 50, 85},
	{"missile", 50, 80},
	{"missileinv", 50, 80},
	{"mortar", 50, 80},
	{"mine2", 40, 75},
	{"mine", 40, 75},
	{"smokebomb", 40, 65},
	{"minigun", 40, 65,},
	{"buzzsaw", 30, 65},
	{"flak", 25, 60},
	{"sniper2", 25, 60},
	{"machinegun", 20, 50},
	{"sniper", 15, 30},
	{"turbine2", 30, -1},
	{"turbine", 25, -1},
	{"magnabeam", -1, -1}, -- ignore magnabeam :(
},

["howitzer"]  = {
	{"barrel", 50, 100},
	{"cannon", 20, 100},
	{"laser", 20, 100},
	{"cannon20mm", 10, 95},
	{"firebeam", 10, 95},
	{"mine2", 0, 90},
	{"mine", 0, 90},
	{"missile2", 0, 90},
	{"missile2inv", 0, 90},
	{"missile", 0, 90},
	{"missileinv", 0, 90},
	{"howitzer", 20, 85},
	{"battery", 50, 10},
	{"factory", 50, 10},
	{"munitions", 50, 10},
	{"magnabeam", 40, 10},
	{"smokebomb", 10, 40}, -- Other wepons will have too easy of a time shooting this down, don't prioritize them
},
["magnabeam"] = {
	{"reactor", 1},
},
["smokebomb"] = {
	{"machinegun", 1, 100},
	{"flak", 1, 100},
	{"reactor", 2, 30},
}
}
--prioritiesListLength = #priorities, Not called recursivly.
FillPriorityEmpty("magnabeam")
FillPriorityEmpty("machinegun")
FillPriorityEmpty("flak")
FillPriorities()
AddCoreToPriorities()
BetterLog(priorities)